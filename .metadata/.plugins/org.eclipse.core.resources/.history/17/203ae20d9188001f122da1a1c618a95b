/*
 * SistemYapilandirici.cpp
 *
 *  Created on: Oct 12, 2024
 *      Author: m_yas
 */

#include <SistemYapilandirici.h>
#include <GPS.h>
#include <IMU.h>
#include <NAV.h>
/**
 * @brief SistemYapilandirici constructor
 */

 SistemYapilandirici::SistemYapilandirici()
{
	 Instance();
	islevBaslat();
}



/**
 * @brief SistemYapilandirici deconstructor
 */
 SistemYapilandirici::~SistemYapilandirici()
{
	}

 /**
  * @brief SistemYapilandirici deconstructor
  */
void SistemYapilandirici::Instance()
 {
	  GPS m_GPS;
 	}

/**
 * @brief Sistemde olan tasklari baslatir
 */
void SistemYapilandirici::islevBaslat()
{

	  /* definition and creation of GPStask */
	osThreadId GPStaskHandle;
	  osThreadDef(GPStask, GPS::vGPStask, osPriorityHigh, 0, 128);
	  GPStaskHandle = osThreadCreate(osThread(GPStask), NULL);

	    // Task'ın başarıyla oluşturulup oluşturulmadığını kontrol et
	    if (GPStaskHandle == NULL) {
	        // Hata yönetimi
	    } else {

	    }

#if 0
	  /* definition and creation of IMUtask */
	    osThreadId IMUtaskHandle;
	  osThreadDef(IMUtask, vIMUtask, osPriorityHigh, 0, 128);
	  IMUtaskHandle = osThreadCreate(osThread(IMUtask), NULL);

	  /* definition and creation of GKAtask */
	  osThreadId GKAtaskHandle
	  osThreadDef(GKAtask, vGKAtask, osPriorityNormal, 0, 128);
	  GKAtaskHandle = osThreadCreate(osThread(GKAtask), NULL);

	  /* definition and creation of GKAtask */
	  osThreadId NAVtaskHandle
	  osThreadDef(GKAtask, vNAVtask, osPriorityNormal, 0, 128);
	  NAVtaskHandle = osThreadCreate(osThread(vNAVtask), NULL);
#endif


	HAL_GPIO_WritePin(LD1_GPIO_Port, LD1_Pin,GPIO_PIN_SET);


	}
